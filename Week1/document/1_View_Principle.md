# Android에서 화면 상에 View가 그려지는 원리에 대해서 조사하시오.

## View 

- 트리 구조 (계층 구조)
- 전위 순회 방식 [루트-왼쪽-오른쪽]
- 탑다운 형식

`부모뷰는 자식뷰가 그려지기 전에(즉, 자식뷰 뒤에) 그려지고, 형제 뷰는 전위 방식에 따라 순서대로 그려진다.`

## View가 그려지는 과정

### 0) root node로 시작 
  - root node란
  `setContentView 메소드를 통해 설정한 View`
  - Activity가 포커스를 갖게 되면, 시스템은 Activity의 root node 요청. root node를 시작으로 트리 구조의 아래로 향하여 뷰를 그리기 시작
  - `이후 자신의 사이즈를 정하고, 자신의 위치를 정한다.`

### 1) Measure(측정) : `View의 크기를 정하는 과정`
  - 부모노드에서 자식노드로 경유하며 실행
  - Measure() 호출
  `각 뷰들은 자신의 getMeausredWidth() , getMeasureHeight() 로 리턴할 값들을 셋팅 = 자신의 사이즈를 정한다.` 
  `자신의 부모로부터 부여된 제약 사항을 따라야 한다. 이로써 모든 부모들은 자신의 자식들의 사이즈를 알게 된다.`
  - 부모들은 첫번째 measure()로 자식들이 원하는 크기를 알아내고, 원하는 크기가 비상적이라면 두번째 measure()을 통해 자식들의 사이즈를 정하는데 간섭한다.
  - 측정과정에서 부모 뷰와 자식 뷰간의 크기 정보를 전달하기 위해 2가지 클래스 사용

    #### 1.1) ViewGroup.LayoutParams
    `자식 뷰가 부모 뷰에게 자신이 어떻게 측정되고 위치를 정할지 요청하는데 사용`
     
     - 뷰의 width, height 가 얼마만큼의 크기를 원하는지 설명
     - 각 view는 반복되는 동안에 공간의 크기를 설계하여 전달
     - 요소
       - 정확한 수치 : ex) 50dp, 100dp
       - MATCH_PARENT :  자신의 `부모만큼` 크기
       - WRAP_CONTENT :  자신의 `내용물만 담을 수 있을 만큼` 크기 

    #### 1.2) MeasureSpec
     - 뷰 트리상 부모가 자식에게 전달하는 requirment(요구사항)을 담고있다.
     - 계산된 사이즈를 이용하여 자신의 모든 children의 positioning한다.
     - 세가지 모드
       - UNSPECIFIED : 부모가 자식이 얼마만큼의 치수를 원하는지 알기 위해 사용한다. `제약사항이 없다.` 자식이 원하는 수치를 가질 수 있다.
       - EXACTLY : 부모가 자식에게 `정확한 수치를 부여`하며, 자식들은 이 치수를 사용해야 한다.
       - ATMOST : 부모가 자식에게 `가질 수 있는 최대 사이즈`를 알려준다.
   
### 2) Layout : `뷰의 위치를 정하는 과정`
- 부모 노드에서 자식 노드를 경유해서 실행
- 뷰와 자식 뷰들의 `크기와 위치를 할당할 때` 사용

### 3) Draw : 최종적으로 뷰를 캔버스 위에 실제로 그리는 과정

